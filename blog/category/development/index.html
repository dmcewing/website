
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="David McEwing">
      
      
      
        <link rel="prev" href="../c-sharp/">
      
      
        <link rel="next" href="../git/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>Development - David's notes and stuff</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.4af4bdda.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    
      <link rel="stylesheet" href="../../../assets/mkdocs_puml/puml.css">
    
      <link rel="stylesheet" href="../../../assets/mkdocs_puml/interaction.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#development" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="David&#39;s notes and stuff" class="md-header__button md-logo" aria-label="David's notes and stuff" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            David's notes and stuff
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Development
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="David&#39;s notes and stuff" class="md-nav__button md-logo" aria-label="David's notes and stuff" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    David's notes and stuff
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../SportsDraw/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Sports Draw
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Sports Draw
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../SportsDraw/adminquickref/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Administration Quick Ref
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../SportsDraw/thedraw/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The Draw
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../SportsDraw/competition/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Competitions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../SportsDraw/times/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Game Times
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../SportsDraw/noplaydays/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    No Play Days
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../SportsDraw/teams/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Teams
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../SportsDraw/generate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Archive
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2025/03/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2025-Mar
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2025/02/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2025-Feb
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2024/11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024-Nov
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2024/08/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024-Aug
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" checked>
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Categories
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../avro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Avro
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../c-sharp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C-Sharp
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    
      
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="On this page...">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page...
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#managing-multiple-solutions" class="md-nav__link">
    <span class="md-ellipsis">
      Managing Multiple Solutions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#avro-to-c-model-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Avro to C# model classes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#times-up-token" class="md-nav__link">
    <span class="md-ellipsis">
      Times Up Token
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connecting-to-git-with-ssh" class="md-nav__link">
    <span class="md-ellipsis">
      Connecting to Git with SSH
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../git/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Git
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../kafka/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kafka
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../powershell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Powershell
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../video-production/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Video Production
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../visual-studio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Visual Studio
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../vmix/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vMix
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="On this page...">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page...
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#managing-multiple-solutions" class="md-nav__link">
    <span class="md-ellipsis">
      Managing Multiple Solutions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#avro-to-c-model-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Avro to C# model classes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#times-up-token" class="md-nav__link">
    <span class="md-ellipsis">
      Times Up Token
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connecting-to-git-with-ssh" class="md-nav__link">
    <span class="md-ellipsis">
      Connecting to Git with SSH
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="development">Development</h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-03-27 00:00:00+00:00">March 27, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="./" class="md-meta__link">Development</a>, 
              <a href="../powershell/" class="md-meta__link">Powershell</a>, 
              <a href="../visual-studio/" class="md-meta__link">Visual Studio</a></li>
        
        
          
          <li class="md-meta__item">
            
              4 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="managing-multiple-solutions"><a class="toclink" href="../../development/powershell/visual-studio/2025/03/27/managing-multiple-solutions/">Managing Multiple Solutions</a></h2>
<p>Do you find that when you are working you need to manage multiple solutions and continually have to switch between them?  I find I'm having to do this 
for every customer where I have to juggle over 10 solutions, often in their
own repositories, for the different aspects of the wider product.</p>
<p>As I spend most of my time in Powershell I created a Powershell menu based
system to navigate between these solutions easily, and assign the correct Azure and DevOps context on startup.</p>
<h3 id="directory-structure"><a class="toclink" href="../../development/powershell/visual-studio/2025/03/27/managing-multiple-solutions/#directory-structure">Directory structure</a></h3>
<p>In order to simplify the management I put all the solutions for a customer in their own directory/folder structure.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>&lt;sourceRoot&gt;
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>  |- Customer 1
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>  |   |- project 1
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>  |   |- project 2
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>  |   |- project 3
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>  |   |- solution.json
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>  |   |- customer.ps1
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>  |
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>  |- Customer 2
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a>      |- project 1
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>      |- project 2
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a>      |- project 3
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a>      |- solution.json
</span><span id="__span-20-14"><a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a>      |- customer.ps1
</span></code></pre></div>
<p>You can see there is a <code>solution.json</code> for each customer, this file is detailed below, but contains the projects that I'm wanting to show on the menu.  As I tend to keep the key ones I use on the menu, rather than the ones I don't touch often.</p>
<p>There is also a Powershell file for each customer.  This is to handle the uniqueness of the environment setup.  Root directory for the customer etc.  Lets look individually at these.</p>
<h4 id="the-menu-definition-solutionjson"><a class="toclink" href="../../development/powershell/visual-studio/2025/03/27/managing-multiple-solutions/#the-menu-definition-solutionjson">The Menu definition: solution.json</a></h4>
<p>A sample solution file is below.  This sample produces three menu items:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="p">[</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="w">  </span><span class="p">{</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="w">    </span><span class="nt">&quot;PathName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Root&quot;</span><span class="p">,</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="w">    </span><span class="nt">&quot;PathFullName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;C:\\Src\\Customer1\\&quot;</span><span class="p">,</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="w">    </span><span class="nt">&quot;Name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="w">    </span><span class="nt">&quot;FullName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:Exit:&quot;</span>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="w">  </span><span class="p">},</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="w">  </span><span class="p">{</span>
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="w">    </span><span class="nt">&quot;PathName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Docs and API Samples&quot;</span><span class="p">,</span>
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="w">    </span><span class="nt">&quot;PathFullName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;C:\\Src\\Customer1\\Docs&quot;</span><span class="p">,</span>
</span><span id="__span-21-11"><a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a><span class="w">    </span><span class="nt">&quot;Name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-21-12"><a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a><span class="w">    </span><span class="nt">&quot;FullName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;::.&quot;</span>
</span><span id="__span-21-13"><a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a><span class="w">  </span><span class="p">},</span>
</span><span id="__span-21-14"><a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a><span class="w">  </span><span class="p">{</span>
</span><span id="__span-21-15"><a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a><span class="w">    </span><span class="nt">&quot;PathName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Code Gen&quot;</span><span class="p">,</span>
</span><span id="__span-21-16"><a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a><span class="w">    </span><span class="nt">&quot;PathFullName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;C:\\Src\\Customer1\\project1&quot;</span><span class="p">,</span>
</span><span id="__span-21-17"><a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a><span class="w">    </span><span class="nt">&quot;Name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Project1.sln&quot;</span><span class="p">,</span>
</span><span id="__span-21-18"><a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a><span class="w">    </span><span class="nt">&quot;FullName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;C:\\Src\\Customer1\\project1\\Project1.sln&quot;</span>
</span><span id="__span-21-19"><a id="__codelineno-21-19" name="__codelineno-21-19" href="#__codelineno-21-19"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-21-20"><a id="__codelineno-21-20" name="__codelineno-21-20" href="#__codelineno-21-20"></a><span class="p">]</span>
</span></code></pre></div>
<dl>
<dt><code>Root</code></dt>
<dd>
<p>This Entry is always the first. The path is to the customers root.  This enables a quick option for getting to the customer's source folder.  This will be discussed later.  The <code>:Exit:</code> indicates to the open solution routines that this option doesn't need to do anything.</p>
</dd>
<dt><code>Docs and API Sample</code></dt>
<dd>
<p>This entry is a <code>VS Code</code> solution as indicated by the full name starting with <code>::</code> the remainder of the fullname is passed to VS Code as what I would normally type... i.e. in this case <code>code .</code> which is my shortcut for opening a <code>VS Code</code> workspace from the current folder.</p>
</dd>
<dd>
<p>For this type of entry, VS Code's working directory is set to the Path FullName before execution.</p>
</dd>
<dt><code>Code Gen</code></dt>
<dd>
<p>This entry is a sample of a standard project entry to open a VS Solution.  The way this works is to execute <code>start</code> before whatever the fullname is.  i.e. in this case <code>start C:\Src\Customer1\project1\Project1.sln</code></p>
</dd>
</dl>
<h3 id="the-script"><a class="toclink" href="../../development/powershell/visual-studio/2025/03/27/managing-multiple-solutions/#the-script">The Script</a></h3>
<p>This is the main powershell file.  It starts with a set of self explanatory variables:</p>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="nv">$PAT</span> <span class="p">=</span> <span class="s2">&quot;--Azure Devops PAT key--&quot;</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="nv">$Organisation</span> <span class="p">=</span> <span class="s2">&quot;--Azure DevOps Organisation--&quot;</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="nv">$Project</span> <span class="p">=</span> <span class="s2">&quot;--Azure DevOps Project--&quot;</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="nv">$trunkBranch</span> <span class="p">=</span> <span class="s2">&quot;dev&quot;</span>       <span class="c">#the trunk branch used by the customer... typically Main or Master</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="nv">$froot</span><span class="p">=</span><span class="s2">&quot;c:\src\Customer1&quot;</span>  <span class="c">#Customer&#39;s project folder.</span>
</span></code></pre></div>
<p>Then it moves onto some function definitions:</p>
<p><code>MakeSelection</code> and <code>GetSln</code> manage the menu functionality.</p>
<p><code>Fetch-DCGitSolutions</code> : This navigates all folders under the customer root (<code>$froot</code>) to find all <code>.git</code> folders and if one exists runs <code>git fetch; git pull</code> in that folder.  This provides a single command to pull all the repos for the customer.</p>
<p><code>Switch-DCGitSolutions</code> : This switches all the repo branches to <code>$trunkBranch</code>.</p>
<p><code>Open-DCSolution</code> : Opens the solution from the menu.</p>
<p><code>Set-DCSolution</code> : Change to the directory from the menu.</p>
<p>Once those are defined.  The script then loads the VSTeam module, sets the VSTeam context using the PAT token.  </p>
<p>Sets some alias shortcuts: </p>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="nb">Set-Alias</span> <span class="n">ccd</span> <span class="nb">Set-DCSolution</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="nb">Set-Alias</span> <span class="n">cop</span> <span class="nb">Open-DCSolution</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="nb">Set-Alias</span> <span class="n">switchall</span> <span class="k">Switch</span><span class="n">-DCGitSolutions</span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="nb">Set-Alias</span> <span class="n">fetchall</span> <span class="n">Fetch-DCGitSolutions</span>
</span></code></pre></div>
<p>It ends with Displaying the menu for reference.
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="nb">Write-Host</span> <span class="n">-ForegroundColor</span> <span class="n">Yellow</span> <span class="s2">&quot;Solution list:&quot;</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="nv">$menu</span> <span class="p">=</span> <span class="nb">ConvertFrom-JSON</span> <span class="p">(</span><span class="nb">Get-Content</span> <span class="nv">$froot</span><span class="p">/</span><span class="n">solutions</span><span class="p">.</span><span class="n">json</span> <span class="n">-Raw</span><span class="p">)</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="nv">$i</span> <span class="p">=</span> <span class="n">0</span><span class="p">;</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="nv">$menu</span> <span class="p">|</span><span class="k">ForEach</span><span class="n">-Object</span> <span class="p">{</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>   <span class="nv">$opt</span> <span class="p">=</span> <span class="nv">$i</span><span class="p">++</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>   <span class="nv">$o</span> <span class="p">=</span> <span class="nv">$_</span><span class="p">.</span><span class="n">PathName</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>   <span class="nb">Write-Host</span> <span class="n">-foregroundcolor</span> <span class="n">cyan</span> <span class="n">-nonewline</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">`t</span><span class="s2">{0}. &quot;</span> <span class="o">-f</span> <span class="nv">$opt</span><span class="p">)</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>   <span class="nb">Write-Host</span> <span class="n">-foregroundcolor</span> <span class="n">white</span> <span class="s2">&quot;</span><span class="se">`t</span><span class="s2">$o&quot;</span>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="p">}</span>
</span></code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The full script is available for download from <a href="../../../assets/code/2025-03/customer.ps1">customer.ps1</a></p>
</div>
<h3 id="loading-in-terminal"><a class="toclink" href="../../development/powershell/visual-studio/2025/03/27/managing-multiple-solutions/#loading-in-terminal">Loading in terminal</a></h3>
<p>The power of this script comes when you create a shell for the customer, i.e. this script loads on startup.  So to do this in the Terminal app go to the settings and create a profile for it.</p>
<p>Create the profile and set the command line to:
<div class="language-text highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>&quot;C:\Program Files\PowerShell\7\pwsh.exe&quot; -NoExit -c . ./customer.ps1
</span></code></pre></div></p>
<p>Set the starting directory to the customer directory (i.e. the location of the customer.ps1 file.)</p>
<p>Set anything else you want, i.e. icon, tab colour, etc.</p>
<h3 id="executing"><a class="toclink" href="../../development/powershell/visual-studio/2025/03/27/managing-multiple-solutions/#executing">Executing...</a></h3>
<p>Now that you have all of that, when loaded into your "Customer Shell" you have the following options available to you:</p>
<h4 id="variables-not-in-the-enviroment"><a class="toclink" href="../../development/powershell/visual-studio/2025/03/27/managing-multiple-solutions/#variables-not-in-the-enviroment">Variables (not in the enviroment)</a></h4>
<p><div class="language-Powershell highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="nv">$PAT</span>
</span></code></pre></div>
This is your PAT key, useful if you are attempting to call the DevOps APIs or run VSTeam powershell commands.</p>
<h4 id="ccd"><a class="toclink" href="../../development/powershell/visual-studio/2025/03/27/managing-multiple-solutions/#ccd">CCD</a></h4>
<p><div class="language-Powershell highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="n">ccd</span> <span class="p">&lt;</span><span class="n">number</span><span class="p">&gt;</span>
</span></code></pre></div>
Short for <em>Customer Change Directory</em> this will change the current working directory to that folder that numbered solution.  If you don't specify a number then a menu is displayed for you to select from.  Note the menu also shows you what Git branch that solution is currently in.</p>
<h4 id="cop"><a class="toclink" href="../../development/powershell/visual-studio/2025/03/27/managing-multiple-solutions/#cop">COP</a></h4>
<p><div class="language-Powershell highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="n">cop</span> <span class="p">&lt;</span><span class="n">number</span><span class="p">&gt;</span>
</span></code></pre></div>
Short for <em>Customer OPen</em> this will open the solution you specify.  As for <code>ccd</code> if you don't specify a number then the menu is displayed.</p>
<h4 id="git-helpers"><a class="toclink" href="../../development/powershell/visual-studio/2025/03/27/managing-multiple-solutions/#git-helpers">Git Helpers</a></h4>
<p><div class="language-Powershell highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="n">switchall</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="n">fetchall</span>
</span></code></pre></div>
<code>switchall</code> and <code>fetchall</code> perform <code>git switch</code> and <code>git fetch;git pull</code> actions on all the folders from the customer's root.</p>
<h3 id="conculsion"><a class="toclink" href="../../development/powershell/visual-studio/2025/03/27/managing-multiple-solutions/#conculsion">Conculsion</a></h3>
<p>I built this solution because I spend the majority of my time in a Powershell console window and need to navigate between multiple solutions for a customer.  This is my solution to help simplify the commands I repeat all the time.</p>
<p>Feel free to customise this solution to your needs, it is a simple powershell script after all.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-02-16 00:00:00+00:00">February 16, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="./" class="md-meta__link">Development</a>, 
              <a href="../c-sharp/" class="md-meta__link">C-Sharp</a>, 
              <a href="../avro/" class="md-meta__link">Avro</a>, 
              <a href="../kafka/" class="md-meta__link">Kafka</a></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="avro-to-c-model-classes"><a class="toclink" href="../../development/c-sharp/avro/kafka/2025/02/16/avro-to-c-model-classes/">Avro to C# model classes</a></h2>
<p>When delaing with Kafka Avro messages and you want to use the <code>ISpecificRecord</code> interface so you can early bind
your model in.  The model classes provide the models for deserialising/seralising the Kafka messages.  These model 
classes are automatically generated from JSON looking Schemas.</p>
<p>There are a number of tools available to do this but I have used the following tools:
1. AvroGen - https://bartwullems.blogspot.com/2020/11/kafka-using-avro-as-serialization.html
1. <a href="https://github.com/dougmsft/microsoft-avro">Microsoft-Avro</a></p>
<p>The first step is to get the Avro model as an AVSC file.  This can be downloaded directly from the topic in confluent
cloud or using the schema registry APIs to get a copy.  Alternatively if you really want to you can create the schema manually in your favourite text editor.</p>
<h3 id="using-avrogen"><a class="toclink" href="../../development/c-sharp/avro/kafka/2025/02/16/avro-to-c-model-classes/#using-avrogen">Using Avrogen</a></h3>
<p>The <code>avrogen</code> tool needs to be installed first with...
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>dotnet tool install --global Apache.Avro.Tools --version 1.11.3
</span></code></pre></div></p>
<p>Once installed the following can be called to generate the model classes...
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>avrogen -s ./schema-sampleavro-value-v1.avsc &quot;sampleavro&quot; --skip-directories 
</span></code></pre></div></p>
<h4 id="automating-the-generation"><a class="toclink" href="../../development/c-sharp/avro/kafka/2025/02/16/avro-to-c-model-classes/#automating-the-generation">Automating the generation</a></h4>
<p>It became quite painful on a recent project with all the updates that kept on being made to these schemas.  So I 
automated this using PowerShell with this script, which searches for and generates the schema for all <code>*.avsc</code> files 
in the folder reading the namespace from inside the Avro schema.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>Write-Host -ForegroundColor darkCyan &quot;Removing existing classes...&quot;
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>Remove-Item -Recurse .\tahiContractDomain\ -Force
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>Remove-Item -Recurse .\tahiPartyDomain\ -Force
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>Write-Host -ForegroundColor darkCyan &quot;Generating new classes...&quot;
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>$domainNames = @()
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>$avroFiles = Get-ChildItem &quot;*v?*.avsc&quot;
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>$avroFiles |% {
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>    Write-Host -ForegroundColor darkYellow $_.Name &quot;...&quot;
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>    $avro = ConvertFrom-Json (Get-Content $_.FullName -raw)
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>    $avroName = $avro.name
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>    $connectName = $avro.&#39;namespace&#39;
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>    $domainName = $connectName.split(&#39;.&#39;)[-1]
</span><span id="__span-8-16"><a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a>
</span><span id="__span-8-17"><a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a>    avrogen -s $_.FullName $domainName --skip-directories 
</span><span id="__span-8-18"><a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a>}
</span></code></pre></div>
<h3 id="avro-namespace"><a class="toclink" href="../../development/c-sharp/avro/kafka/2025/02/16/avro-to-c-model-classes/#avro-namespace">Avro Namespace</a></h3>
<p>The <em>avrogen</em> tool contains an option to change the namespace of the outputted C# classes.  However, the namepace change
is not updated in the schema string that is coded into the classes, so if you use that feature it is very likely that the
Avro serializer/deserializer classes will not work.  This is because the namespace inside in the schema string is used to
dynamically retrieve and instantiate the model class.</p>
<p>I had some thoughts about using a namespace resolver to translate, however, it is not possible to inject this into the Avro
Serializer/Deserializer famework classes.  I aslo tried manually adjusting the schema strings, but deemed that too much effort 
at the time.</p>
<h3 id="end-notes"><a class="toclink" href="../../development/c-sharp/avro/kafka/2025/02/16/avro-to-c-model-classes/#end-notes">End notes</a></h3>
<p>I hope that gets you started in the right direction. Really, as with most things when programming there is no correct way to do anything, just someways make your life a little harder.  Hopefully, these tips point you in the other direction.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-11-12 00:00:00+00:00">November 12, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="./" class="md-meta__link">Development</a>, 
              <a href="../c-sharp/" class="md-meta__link">C-Sharp</a></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="times-up-token"><a class="toclink" href="../../development/c-sharp/2024/11/12/times-up-token/">Times Up Token</a></h2>
<p>During message processing sometimes a message triggers a function that can take a long time to execute.  One strategy to handle this
is to make the process able to retrigger itself after a fixed period of time.</p>
<p>In this example a single message is used to process a large number of update requests.</p>
<div class="language-C# highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span>
<span class="normal"><a href="#__codelineno-4-15">15</a></span>
<span class="normal"><a href="#__codelineno-4-16">16</a></span>
<span class="normal"><a href="#__codelineno-4-17">17</a></span>
<span class="normal"><a href="#__codelineno-4-18">18</a></span>
<span class="normal"><a href="#__codelineno-4-19">19</a></span>
<span class="normal"><a href="#__codelineno-4-20">20</a></span>
<span class="normal"><a href="#__codelineno-4-21">21</a></span>
<span class="normal"><a href="#__codelineno-4-22">22</a></span>
<span class="normal"><a href="#__codelineno-4-23">23</a></span>
<span class="normal"><a href="#__codelineno-4-24">24</a></span>
<span class="normal"><a href="#__codelineno-4-25">25</a></span>
<span class="normal"><a href="#__codelineno-4-26">26</a></span>
<span class="normal"><a href="#__codelineno-4-27">27</a></span>
<span class="normal"><a href="#__codelineno-4-28">28</a></span>
<span class="normal"><a href="#__codelineno-4-29">29</a></span>
<span class="normal"><a href="#__codelineno-4-30">30</a></span>
<span class="normal"><a href="#__codelineno-4-31">31</a></span>
<span class="normal"><a href="#__codelineno-4-32">32</a></span>
<span class="normal"><a href="#__codelineno-4-33">33</a></span>
<span class="normal"><a href="#__codelineno-4-34">34</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="kt">bool</span><span class="w"> </span><span class="n">timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="k">try</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="p">{</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">    </span><span class="c1">//Timeout this block if it exceeds 15 minutes</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="hll"><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="p">(</span><span class="kt">var</span><span class="w"> </span><span class="n">timeoutCts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TimedCancellationSource</span><span class="p">.</span><span class="n">GetTimeoutToken</span><span class="p">())</span>
</span></span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="hll"><span class="w">    </span><span class="p">{</span>
</span></span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="hll"><span class="w">        </span><span class="k">using</span><span class="w"> </span><span class="nn">var</span><span class="w"> </span><span class="n">combinedCts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CancellationTokenSource</span><span class="p">.</span><span class="n">CreateLinkedTokenSource</span><span class="p">(</span><span class="n">cancellationToken</span><span class="p">,</span><span class="w"> </span><span class="n">timeoutCts</span><span class="p">.</span><span class="n">Token</span><span class="p">);</span>
</span></span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8"></a>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="w">        </span><span class="c1">//Get Details to process...</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="w">        </span><span class="k">await</span><span class="w"> </span><span class="n">Parallel</span><span class="p">.</span><span class="n">ForEachAsync</span><span class="p">(</span><span class="n">details</span><span class="p">,</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="nf">ParallelOptions</span><span class="p">()</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="w">                </span><span class="n">CancellationToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">combinedCts</span><span class="p">.</span><span class="n">Token</span><span class="p">,</span>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14"></a><span class="w">                </span><span class="n">MaxDegreeOfParallelism</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="w">            </span><span class="p">},</span>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="w">            </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="n">detail</span><span class="p">,</span><span class="w"> </span><span class="n">cancellationToken</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="w">                </span><span class="c1">//Do process per detail here.</span>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20"></a><span class="w">        </span><span class="p">);</span>
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21"></a>
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22"></a><span class="hll"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">timeoutCts</span><span class="p">.</span><span class="n">Token</span><span class="p">.</span><span class="n">IsCancellationRequested</span><span class="p">)</span>
</span></span><span id="__span-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23"></a><span class="hll"><span class="w">            </span><span class="n">timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span><span class="p">;</span><span class="w"> </span><span class="c1">//We made it.</span>
</span></span><span id="__span-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-4-25"><a id="__codelineno-4-25" name="__codelineno-4-25"></a><span class="p">}</span><span class="w"> </span>
</span><span id="__span-4-26"><a id="__codelineno-4-26" name="__codelineno-4-26"></a><span class="hll"><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">OperationCanceledException</span><span class="p">)</span>
</span></span><span id="__span-4-27"><a id="__codelineno-4-27" name="__codelineno-4-27"></a><span class="hll"><span class="p">{</span>
</span></span><span id="__span-4-28"><a id="__codelineno-4-28" name="__codelineno-4-28"></a><span class="hll"><span class="w">    </span><span class="n">timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span><span class="w">   </span><span class="c1">//This will execute if either token is cancelled.</span>
</span></span><span id="__span-4-29"><a id="__codelineno-4-29" name="__codelineno-4-29"></a><span class="hll"><span class="p">}</span>
</span></span><span id="__span-4-30"><a id="__codelineno-4-30" name="__codelineno-4-30"></a>
</span><span id="__span-4-31"><a id="__codelineno-4-31" name="__codelineno-4-31"></a><span class="hll"><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">cancellationToken</span><span class="p">.</span><span class="n">IsCancellationRequested</span><span class="p">)</span><span class="w"> </span><span class="c1">// So now check which token was cancelled.</span>
</span></span><span id="__span-4-32"><a id="__codelineno-4-32" name="__codelineno-4-32"></a><span class="p">{</span>
</span><span id="__span-4-33"><a id="__codelineno-4-33" name="__codelineno-4-33"></a><span class="w">    </span><span class="c1">//Post message back for the next step.</span>
</span><span id="__span-4-34"><a id="__codelineno-4-34" name="__codelineno-4-34"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>The trick if you missed it is in the <code>TimedCancellationSource</code> and the combining of the two sources into <code>combinedCts</code>.<br />
The implementation of <code>TimedCancellationSource</code> (including interface for DI is below)</p>
<div class="language-C# highlight"><span class="filename">TimedCancellationSource</span><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">Fidelity.Tahi.IntermediaryTransfer.Services</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="p">{</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">interface</span><span class="w"> </span><span class="n">ITimeoutTokenSource</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">        </span><span class="n">CancellationTokenSource</span><span class="w"> </span><span class="nf">GetTimeoutToken</span><span class="p">();</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">TimeoutTokenSource</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ITimeoutTokenSource</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">CancellationTokenSource</span><span class="w"> </span><span class="nf">GetTimeoutToken</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CancellationTokenSource</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">TimeSpan</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">));</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="p">}</span>
</span></code></pre></div>
<p>That is it.  You can of course change the parameters for the timespan on the token source or extend as needed.  For what I 
needed a 15 minute timeout was suiteable to allow enough time in setup and disposal to succeed within the 30 minute function timeout.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-08-17 00:00:00+00:00">August 17, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="./" class="md-meta__link">Development</a>, 
              <a href="../git/" class="md-meta__link">Git</a></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="connecting-to-git-with-ssh"><a class="toclink" href="../../development/git/2024/08/17/connecting-to-git-with-ssh/">Connecting to Git with SSH</a></h2>
<p>Refer: <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh">Connecting to GitHub with SSH</a></p>
<h3 id="first-generate-a-key"><a class="toclink" href="../../development/git/2024/08/17/connecting-to-git-with-ssh/#first-generate-a-key">First Generate a key</a></h3>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">ssh-keygen</span> <span class="n">-t</span> <span class="n">ed25519</span> <span class="n">-C</span> <span class="s2">&quot;your_email@example.com&quot;</span>
</span></code></pre></div>
<h3 id="add-it-to-the-ssh-agent"><a class="toclink" href="../../development/git/2024/08/17/connecting-to-git-with-ssh/#add-it-to-the-ssh-agent">Add it to the ssh-agent</a></h3>
<p>Check agent is running:
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c"># start the ssh-agent in the background</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="nb">Get-Service</span> <span class="n">-Name</span> <span class="n">ssh-agent</span> <span class="p">|</span> <span class="nb">Set-Service</span> <span class="n">-StartupType</span> <span class="n">Manual</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="nb">Start-Service</span> <span class="n">ssh-agent</span>
</span></code></pre></div></p>
<p>Add the key
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="n">ssh-add</span> <span class="p">~/.</span><span class="n">ssh</span><span class="p">/</span><span class="n">id_ed25519</span>
</span></code></pre></div></p>
<h3 id="add-they-key-to-github-account"><a class="toclink" href="../../development/git/2024/08/17/connecting-to-git-with-ssh/#add-they-key-to-github-account">Add they key to GitHub account.</a></h3>
<p>Copy the key...
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nb">cat </span><span class="p">~/.</span><span class="n">ssh</span><span class="p">/</span><span class="n">id_ed25519</span><span class="p">.</span><span class="n">pub</span> <span class="p">|</span> <span class="n">clip</span>
</span></code></pre></div></p>
<p>In the <strong>SSH and GPG Keys</strong> section of your GitHub settings, paste the result.</p>
<h3 id="troubleshooting"><a class="toclink" href="../../development/git/2024/08/17/connecting-to-git-with-ssh/#troubleshooting">Troubleshooting</a></h3>
<p>After following <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/testing-your-ssh-connection">Testing your SSH connection</a>
if that all passes, and still doesn't work with GitHub then possibly the cause is using a non-default name/location for the key.  If possible, use defaults, otherwise. The solution is to edit or create <code>~/.ssh/config</code> (OpenSSH docs for config and Configuring the Location of Identity Keys) to contain the following:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>Host github.com
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>  HostName github.com
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>  User git
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>  IdentityFile ~/.ssh/github-key
</span></code></pre></div>
<p>User must remain as <code>git</code> but change the IdentityFile to match.</p>
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 David McEwing
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "content.code.select", "navigation.indexes"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../../../javascripts/katex.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
      
        <script src="../../../assets/mkdocs_puml/puml.js"></script>
      
        <script src="https://unpkg.com/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>
      
        <script src="../../../assets/mkdocs_puml/interaction.js"></script>
      
    
  </body>
</html>